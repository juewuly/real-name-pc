<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <div>test page</div>
  <% for (var jsIndex in htmlWebpackPlugin.files.js) { %>
    <script type="text/javascript" src="<%=htmlWebpackPlugin.files.js[jsIndex] %>"></script>
  <% } %>

  <script>
    const SdkInstance = RealNamePc.Instance;
    const SdkConfig = RealNamePc.Config;
    // SdkInstance.showEight();

    const options = {
      appkey: '',
      qid: '3211038786',
      platform: 'h5_game',
      idcard_check_type: 'pay_before',
    };

    function config() {
      SdkInstance.config({
        appkey: '',
        qid: '3211038786',
        platform: 'h5_game',
        idcard_check_type: 'pay_before',
        onCloseRealName: () => console.log('è§¦å‘å…³é—­å®åäº‹ä»¶'),
        onSubmitSuccess: () => console.log('è§¦å‘å®åè®¤è¯æˆåŠŸäº‹ä»¶'),
        onSubmitError: () => console.log('è§¦å‘å®åè®¤è¯å¤±è´¥äº‹ä»¶')
      });
    }

    function showRealName(canClose) {
      SdkInstance.showRealName({ 
        canClose: canClose,
        options,
        onClose: handleCloseRealName,
        onSubmitSuccess: handleSubmitSuccess,
        onSubmitError: handleSubmitError
      });
    }

    function handleCloseRealName() {
      console.log('ğŸ‰ã€‚ã€‚close');
    }

    function handleSubmitSuccess(result) {
      console.log('ğŸ‰ã€‚ã€‚ã€‚submit-succ', result);
    }

    function handleSubmitError(err) {
      console.log('ğŸ‰ã€‚ã€‚ã€‚submit-err', err);
    }

    // é…ç½®ç›¸å…³å‚æ•°
    config();

    SdkInstance.fetchRealName()
    .then(res => {
      console.log('res...', res);
      const { auth_type, status } = res;

      // å·²å¼€å¯å®å
      if (auth_type !== '0' && status === '0') {
        showRealName(true);
      }
    })
    .catch(err => console.error('è·å–å®åä¿¡æ¯å¼‚å¸¸', err));

    // SdkInstance.checkAmount({
    //   amount: 30,
    //   gkey: 'rxhjh5'
    // })
    // .then(res => {
    //   console.log('res...checkAmount', res);
    // })
    // .catch(err => console.error('è¯·æ±‚checkAmountæ¥å£å¼‚å¸¸', err));

    // SdkInstance.test()

  </script>
</body>
</html>